<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Construct a KML spatial file and create metadata of type spatial
vector — create_vector_kml • capemlGIS</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Construct a KML spatial file and create metadata of type spatial
vector — create_vector_kml" />
<meta property="og:description" content="create_vector_kml writes a spatial data file of type KML and
generates corresponding metadata of EML entity of type spatialVector" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">capemlGIS</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/create_spatialRaster.html">create_spatialRaster</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Construct a KML spatial file and create metadata of type spatial
vector</h1>
    
    <div class="hidden name"><code>create_vector_kml.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>create_vector_kml writes a spatial data file of type KML and
generates corresponding metadata of EML entity of type spatialVector</p>
    </div>

    <pre class="usage"><span class='fu'>create_vector_kml</span><span class='op'>(</span>
  <span class='va'>vector_name</span>,
  <span class='va'>description</span>,
  geoDescription <span class='op'>=</span> <span class='cn'>NULL</span>,
  overwrite <span class='op'>=</span> <span class='cn'>FALSE</span>,
  projectNaming <span class='op'>=</span> <span class='cn'>TRUE</span>,
  missing_value_code <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>vector_name</th>
      <td><p>(character) The unquoted name of the spatial data object in the R
environment.</p></td>
    </tr>
    <tr>
      <th>description</th>
      <td><p>(character) Description of the vector resource.</p></td>
    </tr>
    <tr>
      <th>geoDescription</th>
      <td><p>(character) A textual description of the geographic study area of the
vector. This parameter allows the user to overwrite the
geographicDesciption value provided in the project config.yaml.</p></td>
    </tr>
    <tr>
      <th>overwrite</th>
      <td><p>(logical) A logical indicating whether to overwrite an existing file bearing
the same name as kml file as it is imported.</p></td>
    </tr>
    <tr>
      <th>projectNaming</th>
      <td><p>(logical) Logical indicating if the resulting kml file should be renamed
per the style used in the capeml ecosystem with the project id + base file
name + md5sum + file extension.  If set to false, the resulting kml will
bear the name the object is assigned in the R environment.</p></td>
    </tr>
    <tr>
      <th>missing_value_code</th>
      <td><p>(character) Quoted character(s) of a flag, in addition to NA or NaN, used to
indicate missing values within the data.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>EML spatialVector object is returned. Additionally, the spatial data
entity is written to file as type kml.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>create_vector_kml creates a EML spatialVector object from a spatial
data object (shapefile, kml) that is read into the R environment or created
in the R environment. The function reads the attributes and classes
contained within a supporting yaml file generated from the
capeml::write_attributes function - create_vector_kml will look for a file
in the working directory with a name of type spatialEntityName_attrs.yaml.
If present, the function reads attribute and factor metadata from supporting
yaml file(s) generated from the capeml::write_attributes() and
capeml::write_factors() functions - create_vector_shape will look for files
in the working directory with a name of type "entity name"_attrs.yaml (or
"entity name"_attrs.csv if an older project) for attribute metadata, and
"entity name"_factors.yaml (or "entity name"_factors.csv if an older
project) for factor metadata. Note that this functionality is predicated on
the existence of a file containing metadata about the attributes, that that
file is in the working directory, and that the file matches the name of the
spatial data entity precisely.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>If project naming is TRUE then create_vector_kml will look for a
package number (packageNum) in config.yaml; this parameter is not passed to
the function and it must exist.</p>
<p>All vector objects are transformed to epsg 4326 (WGS 1984)</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>

<span class='co'># load spatial vector object; because create_kml will generate a new kml, we</span>
<span class='co'># have complete flexibility over the resulting kml file name and manipulating</span>
<span class='co'># the data - here we are starting with an existing shapefile named CORETT but</span>
<span class='co'># will generate a kml with the name ejido_titles_points_of_decree </span>

<span class='va'>ejido_titles_points_of_decree</span> <span class='op'>&lt;-</span> <span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>read_sf</a></span><span class='op'>(</span>
  dsn <span class='op'>=</span> <span class='st'>"data/Regularizacion/ejidal"</span>,
  layer <span class='op'>=</span> <span class='st'>"CORETT"</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span>
<span class='fu'>select</span><span class='op'>(</span>
  <span class='op'>-</span><span class='va'>OBJECTID_1</span>,
  <span class='op'>-</span><span class='va'>FolderNumb</span>,
  <span class='op'>-</span><span class='va'>Surface</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span>
<span class='fu'>mutate</span><span class='op'>(</span>
  Id <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Id</span><span class='op'>)</span>,
  <span class='fu'>across</span><span class='op'>(</span><span class='fu'>where</span><span class='op'>(</span><span class='va'>is.character</span><span class='op'>)</span>, <span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span>pattern <span class='op'>=</span> <span class='st'>"\\r\\n"</span>, replacement <span class='op'>=</span> <span class='st'>""</span>, x <span class='op'>=</span> <span class='va'>.</span><span class='op'>)</span><span class='op'>)</span>,
  <span class='fu'>across</span><span class='op'>(</span><span class='fu'>where</span><span class='op'>(</span><span class='va'>is.character</span><span class='op'>)</span>, <span class='op'>~</span> <span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span>pattern <span class='op'>=</span> <span class='st'>"--"</span>, replacement <span class='op'>=</span> <span class='cn'>NA_character_</span>, x <span class='op'>=</span> <span class='va'>.</span><span class='op'>)</span><span class='op'>)</span>,
  Year <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>Year</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='co'># write attributes (and factors if relevant)</span>

<span class='kw'><a href='https://rdrr.io/r/base/try.html'>try</a></span><span class='op'>(</span><span class='fu'>write_attributes</span><span class='op'>(</span><span class='va'>ejido_titles_points_of_decree</span>, overwrite <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># generate a description for the data entity</span>

<span class='va'>ejido_titles_points_of_decree_desc</span> <span class='op'>&lt;-</span> <span class='st'>"polygons of land regularized by the
National Agency, CORETT; polygons were georeferenced from 281 paper maps,
consolidated into 87 unique regularization degrees of ejidos that became
privitzed from 1987-2007; includes the area of each polygon, the date of
regularization, the name of the ejido, the delegation, and the 'plane
number' that could be used to find the original map file in the CORETT
office; it only includes expropriation for the delegations Xochimilco,
Magdalena Contreras, Iztapalapa, Tlahuac, Gustavo Madero, Cuajimalpa, Alvaro
Obregon, Tlalpan, Coyoacan, and Milpa Alta"</span>

<span class='va'>ejido_titles_points_of_decree_SV</span> <span class='op'>&lt;-</span> <span class='fu'>create_vector_kml</span><span class='op'>(</span>
  vector_name <span class='op'>=</span> <span class='va'>ejido_titles_points_of_decree</span>,
  description <span class='op'>=</span> <span class='va'>ejido_titles_points_of_decree_desc</span>,
  overwrite <span class='op'>=</span> <span class='cn'>TRUE</span>,
  projectNaming <span class='op'>=</span> <span class='cn'>TRUE</span>
  <span class='op'>)</span>

<span class='co'># The resulting spatialVector entity can be added to a EML dataset</span>

<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by S Earl.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


